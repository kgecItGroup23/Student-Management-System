<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/teacher/viewSingleStudent.css">
    <title>Document</title>
    
</head>

<body>

    
    <div class="container">
        <!-- Left Section -->
        <div class="left">
            <div class="profile">
                <div class="avatar">
                    <i class="fa-solid fa-user-graduate"></i>
                </div>
                <h1 class="name">
                    <%=s.fullname %>
                </h1>
            </div>
            <div class="details">
                <ul>
                   
                    <form action="/teacher/<%= s._id %>/singleview?_method=PATCH" method="post">
                        <li><input type="text" readonly name="department" value="<%=s.department %>"></li>
                        <li><input type="text" readonly name="year"value="<%=s.year %>">
                        </li>
                        <li><input type="text" readonly name="rollno"value="<%=s.rollno %>"></li>
                        <li><input type="text" readonly name="mobilenum"value="<%=s.mobilenum %>"></li>
                        <li><input type="text" readonly name="gmail"value="<%=s.gmail %>"></li>
                        <button type="submit" style="display: none;" id="submit">Save Changes</button>
                    </form>
                </ul>
                <button type="button" id="edit">Edit detals</button>
                <form action="/teacher/<%= s._id %>/singleview?_method=DELETE" method="POST" style="display:inline;">
                    <button type="submit" id="remove">Remove Student</button>
                </form>

            </div>
        </div>

        <!-- Right Section -->
        <div class="right">
            <ul class="papers">
                <% curriculum.forEach((curr)=> { %>
  <% curr.papers.forEach((paper)=> { %>
    <li class="card">
      <h2><%= paper.paperName %></h2>
      <p><%= paper.paperCode %></p>

      <% 
        let ca1 = "N/A", ca2 = "N/A", final = "N/A"; 
        marks.forEach((m)=> {
          if (m.papername == paper.paperName) {
            ca1 = m.ca1;
            ca2 = m.ca2;
            final = m.final;
          }
        });

        // calculate total = max(ca1, ca2) + final
        let total = null;
        if (ca1 !== "N/A" && ca2 !== "N/A" && final !== "N/A") {
          total = Math.max(Number(ca1), Number(ca2)) + Number(final);
        }

        // grading system
        let grade = "N/A";
        if (total !== null) {
          if (total >= 90) grade = "O";
          else if (total >= 80) grade = "E";
          else if (total >= 70) grade = "A";
          else if (total >= 60) grade = "B";
          else if (total >= 50) grade = "C";
          else if (total >= 40) grade = "D";
          else grade = "F";
        }
      %>

      <ul>
        <li>ca1: <%= ca1 %></li>
        <li>ca2: <%= ca2 %></li>
        <li>sem: <%= final %></li>
        <li>grade: <%= grade %></li>
      </ul>
    </li>
  <% }) %>
<% }) %>

            </ul>
        </div>
    </div>


    <script>
        let edit = document.querySelector("#edit");
        let inps = document.querySelectorAll("input");
        let remove = document.querySelector("#remove");
        let submit = document.querySelector("#submit");
        edit.addEventListener("click", () => {
           inps.forEach((inp) => {
            inp.removeAttribute("readonly");
           })
           remove.setAttribute("style", "display : none;");
           edit.setAttribute("style","display : none;");
          submit.removeAttribute("style", "display");

            
        })
        console.log("flag" + flag)
    </script>







    

</body>

</html>